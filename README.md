# GlobalsightLocalization: Globalsight 英文网页的中文本地化

## 程序功能
程序用 python3 语言调用有道翻译 api 和必应翻译 api 初步实现了 Globalsight 英文网页的中文本地化

## 文件结构说明

- machine_translation文件夹内是两个机器翻译api（有道、微软）的调用代码，代码皆封装成类，方便调用。
- test.py文件是测试文件，测试时请直接运行该文件。
- LocaleResource_en_US.properties是待翻译的文件

- 运行test.py后会生成LocaleResource_zh_CH.properties文件，即中文本地化后的文件


## 程序特点

- 注释十分完整，适当处有差错控制。
- 程序中共用到了六个正则表达式匹配，皆提取出来并放进了一个函数里，方便日后更新和查看。
- 面向对象思想：机器翻译的功能模块皆封装成类，测试文件里的整块功能尽可能封装成函数，方便调用和更新。


## 关于几个用到的正则表达式
作者进行测试时对本地化后的多次结果进行了分析，力求将所有需翻译的情况考虑在内，并用正则表达式匹配进行替换或翻译，保证本地化结果的准确性和可读性。以下是几个用到的正则表达式的作用：

- 'DO NOT TRANSLATE THIS SECTION' —— 将含'DO NOT TRANSLATE THIS SECTION'这一行下面无需翻译的部分全部直接写入结果文件。

- '#.*' —— 将以'#'开头的行直接写入文件。

- '([^=]*)(=\s*)(.*)' —— 括号代表分组，有三组：第一组匹配非等号的符号0次或多次；第二组匹配等号和右边的空格（0个或多个）；第三组匹配任意除换行符“\n”外的字符0次或多次。程序里是将第三组传入api进行翻译。

- (\.htm)(.*) —— 将在'DO NOT TRANSLATE THIS SECTION'区域之外含有'.htm'且'.htm'后无字符的行直接写入文件。

- '<.*>' —— 判断该行是否含标签，如有则将等号右边的内容传入必应翻译api，原因是必应翻译比有道翻译识别标签的效果更好些，必应不会翻译出标签内的内容。

- 'termbase|Termbase' —— 翻译api没法翻译termbase和Termbase两个术语，此正则表达式用来手动手动对机翻结果进行替换。

